"use strict";(self["webpackChunkamiyabot_console"]=self["webpackChunkamiyabot_console"]||[]).push([[643],{8288:function(e,t,o){o.d(t,{Z:function(){return C}});var a=o(1015),n=(o(8474),o(3191)),i=(o(1758),o(3877),o(4550)),l=(o(6905),o(9007),o(3417)),r=(o(172),o(2261)),s=(o(6809),o(3396));const c={class:"v-table"},d={class:"header-area"},u=["innerHTML"],h=["innerHTML"],f={class:"v-bottom"};function m(e,t,o,m,p,g){const w=r.mi,b=l.EZ,y=i.$Y,v=i.eI,W=n.R,k=(0,s.up)("Refresh"),Z=a.gn;return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s._)("div",null,[(0,s.WI)(e.$slots,"header")]),(0,s.Wm)(b,{style:{width:"520px"},modelValue:e.searchInput,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInput=t),placeholder:"输入任意值搜索...",onChange:t[1]||(t[1]=t=>e.executeLoad(!0))},{append:(0,s.w5)((()=>[(0,s.Wm)(w,{icon:e.searchIcon},null,8,["icon"])])),_:1},8,["modelValue"])]),(0,s.Wm)(v,{data:e.tableData,stripe:"","header-cell-class-name":"v-table-header",ref:"table","empty-text":"暂无数据","max-height":600},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.columns,((t,o)=>((0,s.wg)(),(0,s.j4)(y,{"show-overflow-tooltip":"",width:t.width||e.colWidth[t.field],"class-name":"mark_"+t.field,key:o,prop:t.field,label:t.title},{default:(0,s.w5)((o=>[(0,s.WI)(e.$slots,"cell",{row:o.row,field:t.field,value:o.row[t.field],index:o.$index},(()=>[t.format?((0,s.wg)(),(0,s.iD)("div",{key:0,innerHTML:t.format(o.row,o.row[t.field],o.$index)},null,8,u)):((0,s.wg)(),(0,s.iD)("div",{key:1,innerHTML:o.row[t.field]},null,8,h))]))])),_:2},1032,["width","class-name","prop","label"])))),128)),this.$slots.operations?((0,s.wg)(),(0,s.j4)(y,{key:0,label:"操作",fixed:"right","class-name":"mark_operation",width:e.colWidth.operation},{default:(0,s.w5)((t=>[(0,s.WI)(e.$slots,"operations",{row:t.row,index:t.$index})])),_:3},8,["width"])):(0,s.kq)("",!0)])),_:3},8,["data"]),(0,s._)("div",f,[(0,s.Wm)(W,{layout:e.pagination?"total, prev, pager, next, sizes, jumper":"total",small:!0,background:!0,currentPage:e.currentPage,"onUpdate:currentPage":t[2]||(t[2]=t=>e.currentPage=t),"page-size":e.pageSize,"onUpdate:page-size":t[3]||(t[3]=t=>e.pageSize=t),total:e.total,"onUpdate:total":t[4]||(t[4]=t=>e.total=t),onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["layout","currentPage","page-size","total","onSizeChange","onCurrentChange"]),(0,s.Wm)(Z,{class:"v-bottom-icon",size:20,onClick:t[5]||(t[5]=t=>e.executeLoad())},{default:(0,s.w5)((()=>[(0,s.Wm)(k)])),_:1})])])}var p=o(2482),g=o(4870),w=o(6520);function b(e,t=50){const o=e.clientWidth,a={};let n=0;if(0===o)return{};const i=e.querySelectorAll("tr");i.forEach((e=>{e.querySelectorAll("td, th").forEach((e=>{const o=e.querySelector(".cell"),n=e.querySelectorAll(".cell > *"),i=e.className.match(/mark_(\S+)/);let l=t;for(const t of n)l+=t.offsetWidth;if(i){const e=i[1];"operation"===e&&(l+=30),e in a?a[e]<l&&(a[e]=l):a[e]=o?.offsetWidth||0}}))}));for(const l in a)n+=a[l];if(n<o){let e=Object.keys(a).length;"selection"in a&&(e-=1),"operation"in a&&(e-=1);const t=(o-n)/e;for(const o in a)"selection"!==o&&"operation"!==o&&(a[o]+=t)}return a}var y=o(2748),v=function(e,t,o,a){var n,i=arguments.length,l=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(i<3?n(l):i>3?n(t,o,l):n(t,o))||l);return i>3&&l&&Object.defineProperty(t,o,l),l};let W=class extends w.w3{constructor(...e){super(...e),(0,p.Z)(this,"load",void 0),(0,p.Z)(this,"searchIcon",(0,g.XI)(y.olm)),(0,p.Z)(this,"searchInput",""),(0,p.Z)(this,"tableData",[]),(0,p.Z)(this,"columns",[]),(0,p.Z)(this,"colWidth",{}),(0,p.Z)(this,"pagination",!1),(0,p.Z)(this,"currentPage",1),(0,p.Z)(this,"pageSize",10),(0,p.Z)(this,"total",0)}getColumns(){return{columns:this.columns,colWidth:this.colWidth}}setData(e){this.tableData=e,this.total=e.length,this.pagination=!1}setPaginationData(e){this.tableData=e.list,this.total=e.total,this.pagination=!0}setColumns(e){const t=[];for(const o in e){const a=e[o];a.constructor===String?t.push({field:o,title:a}):(a.field||(a.field=o),t.push(a))}this.columns=t,this.executeLoad()}executeLoad(e=!1){e&&(this.currentPage=1),this.load({currentPage:this.currentPage,pageSize:this.pageSize,search:this.searchInput})}handleSizeChange(){this.executeLoad()}handleCurrentChange(){this.executeLoad()}};W=v([(0,w.Ei)({components:{Refresh:y.hYj},props:{load:{type:Function,default:()=>null}},computed:{table(){return this.$refs.table}},methods:{resetWidth(){setTimeout((()=>{this.colWidth=b(this.table.$el)}),200)}},watch:{tableData:{handler(){this.resetWidth()},deep:!0}}})],W);var k=W,Z=o(89);const x=(0,Z.Z)(k,[["render",m]]);var C=x},5860:function(e,t,o){o.d(t,{Z:function(){return m}});var a=o(7947),n=(o(9910),o(1955)),i=(o(2064),o(3396));function l(e,t,o,l,r,s){const c=n.ly,d=a.d0;return(0,i.wg)(),(0,i.j4)(d,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialogVisible=t),title:e.title,"append-to-body":e.appendToBody,width:e.width},{footer:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"footer")])),default:(0,i.w5)((()=>[(0,i.Wm)(c,{model:e.form,"label-width":e.labelWidth},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["model","label-width"])])),_:3},8,["modelValue","title","append-to-body","width"])}var r=o(2482),s=o(6520),c=function(e,t,o,a){var n,i=arguments.length,l=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(i<3?n(l):i>3?n(t,o,l):n(t,o))||l);return i>3&&l&&Object.defineProperty(t,o,l),l};let d=class extends s.w3{constructor(...e){super(...e),(0,r.Z)(this,"form",void 0),(0,r.Z)(this,"title",void 0),(0,r.Z)(this,"dialogVisible",!1)}show(){this.dialogVisible=!0}async asyncShow(){this.dialogVisible=!0,await this.$nextTick()}hide(){this.dialogVisible=!1}async asyncHide(){this.dialogVisible=!1,await this.$nextTick()}};d=c([(0,s.Ei)({props:{form:Object,title:String,width:Number,appendToBody:Boolean,labelWidth:{type:String,default:()=>"100px"}}})],d);var u=d,h=o(89);const f=(0,h.Z)(u,[["render",l]]);var m=f},9643:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var a=o(5860),n=o(1955),i=(o(7113),o(3417)),l=(o(172),o(8288)),r=o(5065),s=(o(3189),o(2261)),c=(o(6809),o(3396));const d=(0,c.Uk)("添加管理员"),u=(0,c.Uk)("删除"),h=(0,c.Uk)("保存");function f(e,t,o,f,m,p){const g=s.mi,w=r.E2,b=l.Z,y=i.EZ,v=n.nH,W=a.Z;return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.Wm)(b,{ref:"table",load:e.loadList},{header:(0,c.w5)((()=>[(0,c.Wm)(g,{type:"primary",onClick:t[0]||(t[0]=t=>e.$refs.dialog.show())},{default:(0,c.w5)((()=>[d])),_:1})])),operations:(0,c.w5)((({row:t})=>[(0,c.Wm)(w,{underline:!1,type:"danger",onClick:o=>e.delAdmin(t)},{default:(0,c.w5)((()=>[u])),_:2},1032,["onClick"])])),_:1},8,["load"]),(0,c.Wm)(W,{title:"添加管理员",form:e.form,ref:"dialog"},{footer:(0,c.w5)((()=>[(0,c.Wm)(g,{type:"primary",onClick:e.submit},{default:(0,c.w5)((()=>[h])),_:1},8,["onClick"])])),default:(0,c.w5)((()=>[(0,c.Wm)(v,{label:"管理员ID"},{default:(0,c.w5)((()=>[(0,c.Wm)(y,{modelValue:e.form.account,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.account=t)},null,8,["modelValue"])])),_:1}),(0,c.Wm)(v,{label:"备注"},{default:(0,c.w5)((()=>[(0,c.Wm)(y,{modelValue:e.form.remark,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.remark=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["form"])])}var m=o(2482),p=o(6520),g=o(8199);const w=new g.Z;async function b(e){return await w.post({url:"/admin/getAdmin",data:e})}async function y(e){return await w.post({url:"/admin/addAdmin",data:e})}async function v(e){return await w.post({url:"/admin/deleteAdmin",data:e})}var W=function(e,t,o,a){var n,i=arguments.length,l=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(i<3?n(l):i>3?n(t,o,l):n(t,o))||l);return i>3&&l&&Object.defineProperty(t,o,l),l};let k=class extends p.w3{constructor(...e){super(...e),(0,m.Z)(this,"table",void 0),(0,m.Z)(this,"dialog",void 0),(0,m.Z)(this,"form",{account:"",remark:""})}async loadList(e){const t=await b(e);t&&this.table.setPaginationData(t.data)}async delAdmin(e){const t=await v(e);t&&this.table.executeLoad()}async submit(){const e=await y(this.form);e&&(this.dialog.hide(),this.table.executeLoad(),this.form={account:"",remark:""})}};k=W([(0,p.Ei)({components:{VTable:l.Z,VFormDialog:a.Z},computed:{table(){return this.$refs.table},dialog(){return this.$refs.dialog}},mounted(){this.table.setColumns({account:"管理员ID",remark:"备注"})}})],k);var Z=k,x=o(89);const C=(0,x.Z)(Z,[["render",f]]);var _=C},88:function(e,t,o){o(1758)},9910:function(e,t,o){o(1758),o(7195)},3189:function(e,t,o){o(1758)},7960:function(e,t,o){o(1758)},7195:function(e,t,o){o(1758)},6467:function(e,t,o){o(1758)},451:function(e,t,o){o(1758)},3877:function(e,t,o){o(1758),o(172),o(1430),o(7960),o(451),o(6467)},9007:function(e,t,o){o(1758),o(88),o(1430)},6905:function(e,t,o){o(1758),o(88),o(1430),o(4566),o(451)},4566:function(e,t,o){o(1758),o(6467)}}]);
//# sourceMappingURL=643.fe3bc133.js.map